{% extends "templates/portal_base.html" %}
{% block content %}
<style>
    body {
        background: #f4f8fb;
    }

    .container {
        margin: 40px auto;
        background: #fff;
        border-radius: 2rem;
        box-shadow: 0 8px 32px rgba(44, 62, 80, 0.08);
    }

    .tab-btn {
        border: none;
        background: none;
        font-weight: 600;
        color: #6c757d;
        border-bottom: 3px solid transparent;
        transition: color 0.2s, border-bottom 0.2s;
        border-radius: 0;
    }

    .tab-btn.active,
    .tab-btn:focus {
        color: #157347;
        border-bottom: 3px solid #157347;
        background: linear-gradient(90deg, #e0f7fa 0%, #e8f5e9 100%);
    }

    .tab-btn:not(.active):hover {
        color: #0d6efd;
        background: #f1f8ff;
    }

    .tab-content {
        display: none;
        animation: fadeIn 0.5s;
    }

    .tab-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(16px);
        }

        to {
            opacity: 1;
            transform: none;
        }
    }

    .btn-primary,
    .btn-success,
    .btn-secondary {
        font-weight: 600;
        border: none;
        border-radius: 2rem;
        padding: 0.75rem 2.5rem;
        box-shadow: 0 2px 8px rgba(44, 62, 80, 0.07);
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    }

    .btn-primary {
        background: #0d6efd;
        color: #fff;
    }

    .btn-primary:hover,
    .btn-primary:focus {
        background: #157347;
        color: #fff;
        box-shadow: 0 4px 16px rgba(13, 110, 253, 0.12);
    }

    .btn-success {
        background: #157347;
        color: #fff;
    }

    .btn-success:hover,
    .btn-success:focus {
        background: #145a32;
        color: #fff;
        box-shadow: 0 4px 16px rgba(21, 115, 71, 0.12);
    }

    .btn-secondary {
        background: #e3f2fd;
        color: #0d6efd;
        border: 1px solid #b6e0fe;
    }

    .btn-secondary:hover,
    .btn-secondary:focus {
        background: #d1e7dd;
        color: #157347;
        border: 1px solid #a7e9af;
    }

    .p-4.rounded.bg-light.border.text-center {
        background: linear-gradient(120deg, #f1f8ff 60%, #e8f5e9 100%);
        border-radius: 1.5rem !important;
        border: none !important;
        box-shadow: 0 2px 8px rgba(44, 62, 80, 0.04);
        margin-bottom: 1.5rem;
    }

    .fw-semibold {
        font-weight: 700 !important;
    }

    .w-100 {
        width: 100% !important;
    }

    @media (min-width: 768px) {
        .w-md-50 {
            width: 50% !important;
        }
    }
</style>

<div class="container bg-white rounded-4 shadow p-4 p-md-5">
    <!-- Header -->
    <div class="text-center mb-5">
        <h2 style="margin: 0px;" class="fw-bold text-success">Tutor Registration Portal</h2>
        <p class="text-muted">Complete the following steps to join our team of expert tutors.</p>
    </div>

    <!-- Tab Navigation -->
    <div class="d-flex flex-wrap border-bottom mb-4">
        <button class="tab-btn flex-fill py-3 text-secondary active" onclick="changeTab(event, 'tab1')">
            Job Application
        </button>
        <button class="tab-btn flex-fill py-3 text-secondary" onclick="changeTab(event, 'tab2')">
            Test
        </button>
        <button class="tab-btn flex-fill py-3 text-secondary" onclick="changeTab(event, 'tab3')">
            Demo Upload
        </button>
        <button class="tab-btn flex-fill py-3 text-secondary" onclick="changeTab(event, 'tab4')">
            Application Status
        </button>
    </div>

    <form action="#" method="POST">
        <!-- Tab 1 -->
        <div id="tab1" class="tab-content active">
            <div class="p-4 rounded bg-light border text-center">
                <h3 class="fw-semibold text-primary mb-3">Step 1: Personal Information</h3>
                <p class="text-primary mb-4">
                    Provide your full name, contact information, residential address, and upload a profile picture.
                </p>
                <!-- Additional Button -->
                <div class="d-flex justify-content-end mb-2">
                    <button type="button" class="btn btn-primary text-start" style="width: 180px;"
                        onclick='window.open("/tutor-registration-form", "_self");'>Fill Form</button>
                </div>
                <div>
                    <button type="button" class="btn btn-success" onclick="navigateToTab('tab2')">Next Step</button>
                </div>
            </div>
        </div>

        <!-- Tab 2 -->
        <div id="tab2" class="tab-content">
            <div class="p-4 rounded bg-light border text-center">
                <h3 class="fw-semibold text-success mb-3">Step 2: Qualifications</h3>
                <p class="text-success mb-4">
                    Provide your academic background, certifications, and teaching experience. Upload a resume or CV.
                </p>
                <!-- Additional Button -->
                <div class="d-flex justify-content-end mb-2">
                    <button type="button" class="btn btn-primary text-start" style="width: 180px;"
                        onclick='window.open("/tutor_exam", "_self");'>Goto Exam</button>
                </div>
                <div class="d-flex gap-3 justify-content-center">
                    <button type="button" class="btn btn-secondary" onclick="navigateToTab('tab1')">Previous</button>
                    <button type="button" class="btn btn-success" onclick="navigateToTab('tab3')">Next Step</button>
                </div>
            </div>
        </div>

        <!-- Tab 3 -->
        <div id="tab3" class="tab-content">
            <div class="p-4 rounded bg-light border text-center">
                <h3 class="fw-semibold text-primary mb-3">Step 3: Subjects & Availability</h3>
                <p class="text-primary mb-4">
                    Select subjects, grade levels, hourly rate, and your weekly availability.
                </p>
                <!-- Additional Button -->
                <div class="d-flex justify-content-end mb-2 align-items-center gap-2">
                    <input type="url" id="demo_url" class="form-control w-auto" placeholder="Enter demo video URL"
                        style="max-width: 320px;">
                    <button type="button" class="btn btn-primary" onclick="uploadDemoUrl()">Upload Demo URL</button>
                </div>
                <div class="d-flex gap-3 justify-content-center">
                    <button type="button" class="btn btn-secondary" onclick="navigateToTab('tab2')">Previous</button>
                    <button type="button" class="btn btn-success" onclick="navigateToTab('tab4')">Next Step</button>
                </div>
            </div>
        </div>

        <!-- Tab 4 -->
        <div id="tab4" class="tab-content">
            <div class="p-4 rounded bg-light border text-center">
                <h3 class="fw-semibold text-success mb-3">Step 4: Final Review & Submission</h3>
                <p class="text-success mb-4">
                    Review your details, agree to Terms & Conditions, and submit your application.
                </p>
                <!-- Additional Button -->

                <div class="d-flex justify-content-end mb-2">
                    <button type="button" class="btn btn-primary mb-2" onclick="showReviewHelp()">Review Help</button>
                </div>

                <div class="d-flex gap-3 justify-content-center">
                    <button type="button" class="btn btn-secondary" onclick="navigateToTab('tab3')">Previous</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>

</script>


{% endblock %}

{% block script %}
<script>
    frappe.ready(() => {

        document.querySelector('.tab-btn').classList.add('active');
        document.querySelector('.tab-content').classList.add('active');
    });

    function changeTab(event, tabID) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

        document.getElementById(tabID).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function navigateToTab(tabID) {
        const targetButton = Array.from(document.querySelectorAll('.tab-btn'))
            .find(btn => btn.getAttribute('onclick').includes(`'${tabID}'`));
        if (targetButton) targetButton.click();
    }

    function showReviewHelp() {
        frappe.msgprint('Please double-check all your details before submitting.');
    }

    function uploadDemoUrl() {
        const url = document.getElementById('demo_url').value;
        if (!url) {
            frappe.msgprint('Please enter a demo video URL.');
            return;
        }
        // Replace this with your actual upload logic if needed
        frappe.call({
            method: "happyschool.www.job_portal.add_demo_url",
            args: { url: url },
            callback: function(response) {
                if (!response.exc) {
                    frappe.msgprint('Demo URL uploaded successfully!');
                } else {
                    frappe.msgprint('Failed to upload Demo URL. Please try again.');
                }
            }
        });
    }

    // Button handlers for each tab
    // window.onWelcomeClick = function() {
    //     window.open("/tutor-registration-form", "_self");
    // }
    // window.onExamClick = function() {
    //     window.open("/app/tutor-assignment-", "_self");
    // }
    // window.onUploadClick = function() {
    //     frappe.msgprint("Upload tab button clicked!");
    // }
    // window.onStatusClick = function() {
    //     frappe.msgprint("Status tab button clicked!");
    // }

    // ---- Init ----
    // renderStatus();

</script>

{% endblock %}